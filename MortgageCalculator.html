<!DOCTYPE html>
<html>

<head>
    <title>Mortgage Calculator</title>
    <link rel="stylesheet" href="./CSS_Files/MortgageCalculator.css" />
</head>

<body>
    <header>
        <div class="logo">
            <img src="./imgs/Banking-logo.PNG" />
        </div>
        <div class="name">
            <h1>Clarke's UK PLC</h1>
        </div>
        <div class="links"></div>
        <div class="burger">
            <label for="menu" tabindex="0"> = </label>
            <input id="menu" type="checkbox" />
            <ul>
                <li><a href="./index.html">Home >></a></li>
                <li><a href="./Service.html">Services >></a></li>
                <li><a href="./AboutUs.html">About us >></a></li>
                <li><a href="./Contact.html">Contact us >></a></li>
                <li><a href="./FAQ.html">FAQ >></a></li>
            </ul>
        </div>
        <div class="login"></div>
    </header>
    <div class="container">
        <div class="header-whitespace"></div>


        <div class="Loan-term">
            <h2>Loan Term: </h2>
        </div>


        <div class="Monthly-income">
            <h2>Monthly Income: </h2>
        </div>


        <div class="Loan-input">
            <input type="number" id="loanTerm" placeholder="Enter Loan Term in Months" required>
        </div>


        <div class="Income-input">
            <input type="number" id="monthlyIncome" placeholder="Enter Monthly Income" required>
        </div>


        <div class="Break-down">
            <h2>Break Down: </h2>
        </div>


        <div class="Months">
            <h2>Months: </h2>
            <p id="numMonths">0</p>
        </div>

        <div class="Monthly-payment">
            <h2>Monthly Payment: </h2>
            <p id="monthlyPayment">0.00</p>
        </div>

        <div class="Interest-rate">
            <h2>Interest Rate: </h2>
            <p id="interestRate">4.5%</p>
        </div>


        <div class="Slider">
            <label for="loanAmount">Loan Amount: </label>
            <input type="range" id="loanAmount" min="1000" max="50000" step="500" value="10000">
            <span id="loanAmountValue">$10000</span>
        </div>


        <div class="Submit">
            <button type="button" id="calculateBtn">Calculate</button>
        </div>


        <div class="error-message" style="color: red; display: none;">
            <p id="errorMessage">Error: Monthly payment exceeds 30% of your monthly income!</p>
        </div>
    </div>

    <script>
        const interestRate = 0.045;
        document.getElementById('loanAmount').addEventListener('input', function () {
            const loanAmountValue = document.getElementById('loanAmount').value;
            document.getElementById('loanAmountValue').textContent = `$${loanAmountValue}`;
        });
        document.getElementById('calculateBtn').addEventListener('click', function (event) {
            event.preventDefault();
            const loanTerm = parseInt(document.getElementById('loanTerm').value);
            const monthlyIncome = parseInt(document.getElementById('monthlyIncome').value);
            const loanAmount = parseInt(document.getElementById('loanAmount').value);
            if (isNaN(loanTerm) || isNaN(monthlyIncome) || isNaN(loanAmount)) {
                alert("Please enter valid values for all fields.");
                return;
            }
            const monthlyInterestRate = interestRate / 12;
            const monthlyPayment = (loanAmount * monthlyInterestRate * Math.pow(1 + monthlyInterestRate, loanTerm)) / (Math.pow(1 + monthlyInterestRate, loanTerm) - 1);
            if (monthlyPayment > 0.30 * monthlyIncome) {
                document.getElementById('errorMessage').style.display = 'block';
                document.getElementById('monthlyPayment').textContent = "you cannot afford this loan";
                return;
            } else {
                document.getElementById('errorMessage').style.display = 'none';
            }
            document.getElementById('numMonths').textContent = loanTerm;
            document.getElementById('monthlyPayment').textContent = monthlyPayment.toFixed(2);
            document.getElementById('interestRate').textContent = `${(interestRate * 100).toFixed(1)}%`;
        });
    </script>
</body>

</html>